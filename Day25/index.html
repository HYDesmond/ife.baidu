<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>25_27</title>
  <style>
    .box {
      border: 1px solid #d9d9d9;
      padding: 10px;
      margin-bottom: 10px;
    }

    p {
      word-break: break-all;
    }

    .btnBox {
      margin-top: 10px;
    }
  </style>
</head>

<body>
  <!-- 编程一 -->
  <div class="box">
    <span>一、GoSteps()函数</span>
    <p>结果看console</p>
    <button id="btn1"> 走你ε=ε=ε=ε=ε=ε= (╯’ – ‘)╯</button>
    <script>
      function Go() {
        console.log("Go");
      }
      // 走走走
      function GoSteps(n) {
        console.log('----- GoStep(' + n + ') -----')

        // 缺少参数默认执行一次Go()
        if (n === undefined) {
          return Go();
        }
        // 当n < 0为真才继续执行
        if (n < 0) return false;

        // 参数处理成整数，向下取整
        n = Math.floor(n);
        // 循环触发
        while (n--) {
          Go();
        }
      }
      // 点击触发
      document.getElementById('btn1').onclick = function () {
        GoSteps(10); // Go 10次
        GoSteps(1); // Go 1次
        GoSteps(); // Go 1次，认为缺少参数时，默认参数为1
        GoSteps(0);  // 0次
        GoSteps(-1);  // 0次
        GoSteps(1.4);  // Go 1次
        GoSteps(1.6);  // Go 1次
        GoSteps(-1);  // 0次
        GoSteps(true);  // Go 1次
        GoSteps(false);  // 0次
        GoSteps("Test");  // 0次
        GoSteps(NaN);  // 0次
        GoSteps(null);  // 0次
      }
    </script>
  </div>
  <!-- 编程二 -->
  <div class="box">
    <span>二、最简单的时钟</span>
    <p id="clock1" data-format="YYYY 年 MM 月 DD 日 星期ww HH:mm:ss"></p>
    <p id="clock2" data-format="YYYY-MM-DD WW hh:mm:ss md"></p>
    <script>
      // --- 数字位数补0 (暂只考虑日期用两位数) ---
      var fillNum = function (num) {
        return num >= 10 ? num : '0' + num;
      }
      // ---------------------------------------
      // --- 获取星期 ---
      // 显示文案
      var week = ['日', '一', '二', '三', '四', '五', '六'];
      var weekEn = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];

      var getWeek = function (date) {
        var day = date.getDay();
        return {
          ww: week[day], // 中文星期
          WW: weekEn[day], // 英文星期
        }
      }
      // ---------------
      // --- 获取小时 ---
      var getHours = function (date) {
        var hours = date.getHours();
        return {
          HH: fillNum(hours), // 24小时制
          hh: hours > 12 ? fillNum(hours - 12) : fillNum(hours), // 12小时制
        }
      }
      // ---------------
      // --- 日期格式化 ---
      var dayFormat = function (day, format) {
        // 以约定的字段存放处理后的值
        var obj = {
          YYYY: day.getFullYear(), // 年份
          MM: fillNum(day.getMonth() + 1), // 月份
          DD: fillNum(day.getDate()), // 日
          mm: fillNum(day.getMinutes()), // 分钟
          ss: fillNum(day.getSeconds()), // 秒
          md: day.getHours() >= 12 ? 'AM' : 'PM', // am pm
        }
        // 小时
        Object.assign(obj, getHours(day));
        // 星期
        Object.assign(obj, getWeek(day));

        // 组装格式化后的字符串
        var str = format || 'YYYY 年 MM 月 DD 日 星期ww HH:mm:ss';
        for (k in obj) {
          if (format.indexOf(k) !== -1) str = str.replace(k, obj[k]);
        }
        return str;
      }
      // -----------------
      // --- 倒计时走起 ---
      var clock1 = document.getElementById('clock1');
      var clock2 = document.getElementById('clock2');
      var format1 = clock1.dataset.format; // 格式写在标签内
      var format2 = clock2.dataset.format; // 格式写在标签内

      var countdown = function () {
        var day = new Date();
        clock1.innerHTML = dayFormat(day, format1);
        clock2.innerHTML = dayFormat(day, format2);
        setTimeout(countdown, 1000);
      }
      countdown();
      // -----------------
    </script>
  </div>
  <!-- 编程三 -->
  <div class="box">
    <select id="year-select">
      <option value="2014">2014</option>
      <option value="2015">2015</option>
      <option value="2016">2016</option>
      <option value="2017">2017</option>
      <option value="2018">2018</option>
      <option value="2019">2019</option>
      <option value="2020">2020</option>
    </select>
    <select id="month-select">
      <option value="1">1</option>
      <option value="2">2</option>
      <option value="3">3</option>
      <option value="4">4</option>
      <option value="5">5</option>
      <option value="6">6</option>
      <option value="7">7</option>
      <option value="8">8</option>
      <option value="9">9</option>
      <option value="10">10</option>
      <option value="11">11</option>
      <option value="12">12</option>
    </select>

    <select id="day-select"></select>

    <select id="hour-select"></select>

    <select id="minite-select"></select>

    <select id="second-select"></select>

    <p id="result-wrapper">现在距离 2001年1月1日星期X HH:MM:SS 还有 X 天 X 小时 X 分 X 秒</p>
    <script>
      var daySelect = document.querySelector('#day-select');
      // ..生成html（手动写html太麻烦）..
      var html = '<option value="num">num</option>'; // 模版
      var init = function(day) {
        // 配置时分秒选项
        var timeMax = 60; // 分秒最大值
        var dayMax = 31; // 日最大值，按一月算
        var hourMax = 24; // 时最大值
        var options = [];
        var optionsDay = [];
        var optionsHour = [];
        for (var i = 0; i < timeMax; i ++) {
          options.push(html.replace(/num/g, i));
          if (i !== 0 && i < dayMax) optionsDay.push(html.replace(/num/g, i));
          if (i < hourMax) optionsHour.push(html.replace(/num/g, fillNum(i)));
        }
        daySelect.innerHTML = optionsDay.join('');
        document.getElementById('hour-select').innerHTML = optionsHour.join('');
        document.getElementById('minite-select').innerHTML = options.join('');
        document.getElementById('second-select').innerHTML = options.join('');
      }
      init();

      // 日选项配置
      var setHourOptions = function(num) {
        var options = [];
        for (var i = 1; i < num; i ++) {
          options.push(html.replace(/num/g, i));
        }
        daySelect.innerHTML = optionsDay.join('');
      }
      var selects = document.querySelectorAll('select');
      for (var i = 0; i < selects.length; i ++) {
        selects[i].addEventListener('change', function(e) {
          console.log(e.target.id)
        })
      }
    </script>
  </div>
</body>

</html>